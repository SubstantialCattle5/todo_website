{% load static %}

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Do-little</title>
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
      <link href="{% static 'css/styles.css' %}" rel = 'stylesheet'>
  </head>

  <body>

  <!-- navbar-->
  <nav class="navbar navbar-expand-lg bg-light">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">DoNothing</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent" style="position: absolute ; right : 20px ; ">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="#">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/logout">Logout</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <!--Title-->
  <div class = "text-center px-4 pt-5 my-5">
       <h1 class = 'display-2 fw-bold' >Do-Nothing!</h1>
        <p class="lead mb-4">Productive website which allows you to not do any work.</p>
  </div>

    <!-- Top -->
    <div class="px-4 pt-5 my-5 " style="padding-bottom: 200px ; " >

       <div class="col-lg-6 mx-auto text-center">
        <form action="" method="POST">
            {% csrf_token %}
            <!-- Text area-->
          <div class="d-grid gap-2 d-sm-flex justify-content-sm-center mb-5">
                 <textarea name="task" rows="5" cols="100" class="shadow-lg" placeholder="Enter the task you wanna skip...."></textarea>
          </div>

     <!--Buttons--->
         <div class="d-grid gap-2 d-sm-flex justify-content-sm-center mb-5">
             <button type="submit" class="btn btn-success btn-lg btn-block" name ='save'>Skip</button>
             <p></p>
             <button type="submit" class="btn btn-danger btn-lg"  name = 'exit'>Save</button>
         </div>
    </form>

       </div>

    </div>

    <!--ToDo list -->
  {%  for task in tasks   %}
  <div class="container my-5">
    <div class="row p-4 pb-0 pe-lg-0 pt-lg-5  rounded-3 border shadow-lg card">
        <h4 class="display-6 fw-bold lh-1">Task </h4>
        <br>
        <div class = 'row'>
        <p class = 'fst-italic col-lg-3'>
            {{ task.created_at }}
        </p>
        <p class="lead col-lg-10">
            {{ task.task }}
        </p>
        </div>
        <br>
        <div class = 'row'>
            <button type="button" class="btn btn-success col-lg-2" id="liveToastBtn">Done</button>
            <p class = 'col-lg-1'></p>
            <button type="submit" class="btn btn-danger col-lg-2">Ignored</button>
        </div>
        <br>

  </div>

  </div>
  {% endfor  %}



































        <!-- toast-->
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
        <div id="task-done" class="toast hide" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header">
                  <strong class="me-auto">Whyyyyyyyyy</strong>

                  <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
                <div class="toast-body">
                  You were not supposed to do that Task!!!
                </div>
        </div>
        </div>
    </div>

    <script>
            const toastTrigger = document.getElementById('liveToastBtn')
    const toastLiveExample = document.getElementById('task-done')
    if (toastTrigger) {
      toastTrigger.addEventListener('click', () => {
        const toast = new bootstrap.Toast(toastLiveExample)

        toast.show()
      })
    }
    </script>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>



  </body>
</html>